import { saveBookingToFirebase, loadBookingsFromFirebase } from './firebase.js';

// จัดการฟอร์มการจอง
const bookingForm = document.getElementById('bookingForm');
const bookingList = document.getElementById('bookingList');

// โหลดข้อมูลการจองเมื่อหน้าเว็บโหลดเสร็จ
loadBookingsFromFirebase(bookingList);

// ฟังการส่งฟอร์มและบันทึกการจอง
bookingForm.addEventListener('submit', function (e) {
  e.preventDefault();

  // ดึงค่าจากฟอร์ม
  const room = document.getElementById('room').value;
  const name = document.getElementById('name').value;
  const time = document.getElementById('time').value;

  // บันทึกข้อมูลการจองไปที่ Firebase
  saveBookingToFirebase(room, name, time);

  // เพิ่มแถวในตารางทันที
  const newRow = document.createElement('tr');
  newRow.innerHTML = `
    <td>${room}</td>
    <td>${name}</td>
    <td>${time}</td>
  `;
  bookingList.appendChild(newRow);

  // ล้างข้อมูลในฟอร์ม
  bookingForm.reset();
});
